---
interface Props {
  title: string;
}

const { title } = Astro.props;
const sliderId = `embla-${Math.random().toString(36).substr(2, 9)}`;
---

<section class="py-12 bg-gray-900">
  <div class="container-custom">
    <h2 class="text-2xl md:text-3xl font-bold mb-6 text-white">{title}</h2>

    <div class="embla" data-embla-id={sliderId}>
      <div class="embla__viewport">
        <div class="embla__container">
          <slot />
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .embla {
    overflow: hidden;
  }

  .embla__viewport {
    overflow: hidden;
    width: 100%;
  }

  .embla__container {
    display: flex;
    gap: 0.75rem;
    touch-action: pan-y pinch-zoom;
  }

  @media (min-width: 768px) {
    .embla__container {
      gap: 1rem;
    }
  }

  .embla__container > :global(*) {
    flex: 0 0 auto;
    min-width: 0;
  }
</style>

<script>
  import EmblaCarousel from 'embla-carousel';

  document.addEventListener('DOMContentLoaded', () => {
    const emblaNodes = document.querySelectorAll('[data-embla-id]');

    emblaNodes.forEach(emblaNode => {
      const viewport = emblaNode.querySelector('.embla__viewport') as HTMLElement;
      if (!viewport) return;

      EmblaCarousel(viewport, {
        align: 'start',
        dragFree: true,
        containScroll: 'trimSnaps',
        direction: 'rtl'
      });
    });
  });
</script>

