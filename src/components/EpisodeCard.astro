---
interface Props {
  tv: number;
  se: number;
  ep: number;
  title: string;
  duration: string;
  type?: 'show' | 'anime';
}

const { tv, se, ep, title, duration, type = 'show' } = Astro.props;
const basePath = type === 'anime' ? '/anime' : '/shows';
---

<a href={`${basePath}/${tv}/${se}/${ep}`} class="episode-card group block transition-all">
  <div class="aspect-video bg-gray-700 rounded-lg overflow-hidden relative">
    <div class="absolute inset-0 flex items-center justify-center bg-gray-800">
      <div class="text-center">
        <span class="i-carbon-play-filled text-3xl text-primary-500 opacity-0 group-hover:opacity-100 transition-opacity"></span>
        <p class="text-xl font-bold text-gray-200">حلقة {ep}</p>
        {duration && <p class="text-xs text-gray-400 mt-1">{duration}</p>}
      </div>
    </div>
  </div>
  <div class="pt-2">
    <h3 class="font-medium text-xs text-gray-300 line-clamp-1">{title}</h3>
  </div>
</a>

<style>
  .episode-card {
    width: 180px;
  }

  .episode-card:hover {
    transform: translateY(-2px);
  }

  @media (max-width: 640px) {
    .episode-card {
      width: 150px;
    }
  }

  @media (min-width: 768px) {
    .episode-card {
      width: 200px;
    }
  }

  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
