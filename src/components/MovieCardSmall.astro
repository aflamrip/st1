---
import { Image } from 'astro:assets';

interface Props {
  id: number;
  title: string;
  year: number;
  thumbnail: string;
}

const { id, title, year, thumbnail } = Astro.props;
---

<a href={`/movies/${id}`} class="movie-card-small group block transition-all">
  <div class="relative overflow-hidden rounded-lg bg-gray-800">
    <Image
      src={thumbnail}
      alt={title}
      class="w-full h-[180px] object-cover group-hover:scale-105 transition-transform duration-300"
      loading="lazy"
      width={360}
      height={360}
      format="webp"
      quality={80}
    />
    <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/0 to-black/0 opacity-0 group-hover:opacity-100 transition-opacity">
      <div class="absolute bottom-0 left-0 right-0 p-3 flex items-center justify-center">
        <span class="i-carbon-play-filled text-3xl text-white"></span>
      </div>
    </div>
  </div>
  <div class="pt-2">
    <h3 class="font-medium text-xs text-gray-200 line-clamp-1">{title}</h3>
    <p class="text-xs text-gray-400 mt-0.5">{year}</p>
  </div>
</a>

<style>
  .movie-card-small {
    width: 160px;
  }

  .movie-card-small:hover {
    transform: translateY(-2px);
  }

  @media (max-width: 640px) {
    .movie-card-small {
      width: 140px;
    }
  }

  @media (min-width: 768px) {
    .movie-card-small {
      width: 180px;
    }
  }

  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
